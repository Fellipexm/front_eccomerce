<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Store</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="assets/logo1.png">
</head>

<body>
    <header>
        <h1>Game Store</h1>
        <img src="assets/mario-removebg-preview.png" alt="marios" id="mario">
        <img src="assets/ps5-removebg-preview.png" alt="marios" id="console1">
    </header>
    <div class="carousel-container">
        <img src="assets/logo1.png" alt="gamestore" id="logo">
    </div>
    <div class="login">
    </div>
    <main>
        <section id="user-welcome" class="game-section">
            <h2>Bem-vindo, <span id="username"></span>!</h2>
            <div class="sobre-nos-content">
                <p>
                    Querido amigo(a) <span id="username">,</span> sua presen√ßa ilumina nossa loja! üåü Explore as √∫ltimas
                    novidades, entregue-se ao encanto e divirta-se em cada detalhe. Estamos aqui para tornar sua
                    experi√™ncia √∫nica e inesquec√≠vel. üíñ‚ú®

                </p>

                <img src="https://i.postimg.cc/XqvYJx2f/bem-vinsdo-removebg-preview.png" style="width: 300px;">
                <div id="games-products" class="products"></div>

                <!-- Adicionando o campo de avalia√ß√£o -->
                <div id="user-rating">
                    <label for="userReview">Deixe sua avalia√ß√£o, <span id="usernameInReview"></span>:</label>
                    <textarea id="userReview" rows="4" cols="50"></textarea>
                    <button onclick="submitReview()">Enviar Avalia√ß√£o</button>
                </div>
            </div>
        </section>

        <section id="games" class="game-section">
            <a href="games.html"><img src="https://i.postimg.cc/d3LfHTHR/Black-and-Yellow-Minimalist-Player-Gaming-Logo-removebg-preview.png" id="jogo"></a>
            <div class="sobre-nos-content">
                <p> Clique no √çcone‚¨ÜÔ∏è</p><br>
                <p>
                    Explore nosso para√≠so gamer! Nossa loja oferece uma ampla sele√ß√£o de jogos, desde cl√°ssicos
                    atemporais at√© lan√ßamentos emocionantes. Descubra mundos fascinantes, encare desafios intrigantes e
                    mergulhe em narrativas envolventes. Seja f√£ de a√ß√£o, aventura ou estrat√©gia, temos o jogo perfeito
                    para voc√™. Descubra as √∫ltimas novidades, garanta pr√©vias exclusivas e junte-se a uma comunidade
                    apaixonada por games. Na nossa loja, a divers√£o √© garantida e a pr√≥xima grande aventura est√° prestes
                    a come√ßar. Prepare-se para jogar, competir e se emocionar no universo dos games!

                </p>
                <div id="games-products" class="products"></div>
            </div>
        </section>

        <section id="consoles" class="game-section">
            <a href="console.html"><img src="https://i.postimg.cc/MpRnkfkD/console-removebg-preview.png" id="console"></a>
            <div class="sobre-nos-content">
                <p> Clique no √çcone‚¨ÜÔ∏è</p><br>
                <p>
                    Explore a nossa sele√ß√£o de consoles de √∫ltima gera√ß√£o, proporcionando gr√°ficos impressionantes e
                    jogabilidade envolvente. Dos consoles mais populares aos lan√ßamentos mais recentes, temos o
                    dispositivo perfeito para levar sua experi√™ncia de jogo a novos patamares. Desfrute da praticidade
                    de jogar seus t√≠tulos favoritos diretamente do seu console e mergulhe em mundos virtuais cheios de
                    aventuras. Prepare-se para horas de entretenimento ininterrupto - na nossa loja, os consoles que
                    voc√™ sempre desejou est√£o ao seu alcance. O pr√≥ximo n√≠vel de divers√£o come√ßa aqui!

                </p>
                <div id="consoles-products" class="products"></div>
            </div>
        </section>

        <section id="accessories" class="game-section">
            <a href="carrinho.html"><img src="https://i.postimg.cc/4dQq75D3/carinho-removebg-preview.png" id="carinho"></a>
            <div class="sobre-nos-content">
                <p> Clique no √çcone‚¨ÜÔ∏è</p><br>
                <p>
                    Conclua sua compra ou fa√ßa sua primeira compra agora mesmo! 
                </p>
            </div>
            <div id="accessories-products" class="products"></div>
        </section>

        <section id="sobre-nos" class="game-section">
            <h2>Sobre N√≥s</h2>
            <div class="sobre-nos-content">
                <p>
                    Bem-vindo √† "Game Store", sua loja virtual definitiva para tudo relacionado a jogos! Explore nosso
                    vasto
                    cat√°logo de jogos, consoles e acess√≥rios, com ofertas especiais e descontos exclusivos. Priorizamos
                    sua
                    conveni√™ncia e seguran√ßa, proporcionando uma experi√™ncia de compra f√°cil e protegida. Al√©m de uma
                    loja, somos
                    uma comunidade gamer, oferecendo interatividade, discuss√µes e eventos exclusivos. Junte-se a n√≥s na
                    "Game
                    Store", onde a divers√£o e a paix√£o pelos jogos se encontram!
                </p>
            </div>
        </section>

        <!-- Adicione este div onde deseja exibir os coment√°rios -->
          <div id="comentarios-container" class="comentarios-container"></div>

    </main>
    <script src="pages/script.js"></script>
    <script>
        window.onload = function () {
            carregarComentarios();
        };
        
        function carregarComentarios() {
            fetch('http://127.0.0.1:5000/listar_comentarios')
                .then(response => response.json())
                .then(data => {
                    exibirComentarios(data);
                })
                .catch((error) => {
                    console.error('Erro ao carregar coment√°rios:', error);
                });
        }
        
        function exibirComentarios(comentarios) {
            var comentariosContainer = document.getElementById('comentarios-container');
        
            comentariosContainer.innerHTML = '';
        
            comentarios.forEach(function (comentario) {
                var comentarioElement = document.createElement('div');
                comentarioElement.className = 'comentario';
                comentarioElement.innerHTML = '<strong>' + comentario.usuario + ':</strong> ' + comentario.comentario;
                comentariosContainer.appendChild(comentarioElement);
            });
        }
        
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
        
        var username = getParameterByName('username');
        
        document.getElementById('username').innerText = username;
        document.getElementById('usernameInReview').innerText = username;
        
        function submitReview() {
            var username = document.getElementById('username').innerText;
            var reviewText = document.getElementById('userReview').value;
        
            if (!reviewText) {
                alert('Por favor, digite sua avalia√ß√£o antes de enviar.');
                return;
            }
        
            var data = {
                usuario: username,
                comentario: reviewText
            };
        
            fetch('http://localhost:5000/adicionar_comentario', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                })
                .then(response => response.json())
                .then(data => {
                    alert(data.mensagem);
                    document.getElementById('userReview').value = '';
                    carregarComentarios(); // Adiciona essa linha para recarregar os coment√°rios ap√≥s o envio de um novo
                })
                .catch((error) => {
                    console.error('Erro ao enviar avalia√ß√£o:', error);
                });
        }
        
   
    </script>
    
</body>

</html>
